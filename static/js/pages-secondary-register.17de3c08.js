(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-secondary-register"],{3100:function(e,t,n){var o=n("24fb");t=o(!1),t.push([e.i,".container[data-v-7c2e5fe4]{padding:%?50?% %?40?%}.login-title[data-v-7c2e5fe4]{line-height:1;font-size:%?50?%;margin-bottom:%?46?%}.login-card[data-v-7c2e5fe4]{background-color:#fff;padding:0 %?50?% %?50?% %?50?%;border-radius:%?40?%}.login-item[data-v-7c2e5fe4], .m-btn.login-item[data-v-7c2e5fe4]{width:100%;padding:%?50?% 0;border-bottom:%?1?% solid #f0f0f0;font-size:%?30?%}.m-btn.login-item[data-v-7c2e5fe4]{-webkit-box-pack:left;-webkit-justify-content:left;justify-content:left;font-size:%?30?%}.placeholder[data-v-7c2e5fe4], .m-btn.placeholder[data-v-7c2e5fe4]{color:#b3b3b3}.btn-box[data-v-7c2e5fe4]{padding-top:%?70?%}.mark[data-v-7c2e5fe4]{display:-webkit-inline-box;display:-webkit-inline-flex;display:inline-flex;margin-right:%?20?%;border-radius:%?100?%;padding-left:%?30?%;padding-right:%?30?%;font-size:%?28?%;height:%?58?%;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;align-items:center;border:%?1?% solid #333}",""]),e.exports=t},"508e":function(e,t,n){"use strict";var o=n("82e8"),i=n.n(o);i.a},5764:function(e,t,n){"use strict";var o=n("4ea4");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n("96cf");var i=o(n("1da1"));n("7db0"),n("d81d"),n("ac1f"),n("1276"),n("a15b");var r=o(n("dfdb")),a=o(n("df73")),s={name:"login",data:function(){return{session_key:"",form:{name:"",icard:"",mobile:"",code:"",school_ids:"",operators:"",open_id:""},options:{school:[],operators:[{code:1,label:"电信"},{code:2,label:"联通"},{code:3,label:"移动"}]},picker:{operators:!1,school:!1},select:{operators:[]}}},onLoad:function(e){var t=e.code;this.form.code=t,this.loadOptions()},created:function(){},computed:{schoolStr:function(){var e=this;if(!this.form.school_ids)return"学校";var t=this.options.school.find((function(t){return t.code===e.form.school_ids}));return t?t.label:this.form.school_ids},operatorsNames:function(){var e=this;return this.select.operators.map((function(t){var n=e.options.operators.find((function(e){return e.code===t}));return n?n.label:t}))}},methods:{loadOpenId:function(){var e=this;return(0,i.default)(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a.default.loading(),t.prev=1,t.next=4,r.default.getOpenId();case 4:n=t.sent,e.form.open_id=n.data.openid,e.session_key=n.data.session_key;case 7:return t.prev=7,a.default.closeLoading(),t.finish(7);case 10:case"end":return t.stop()}}),t,null,[[1,,7,10]])})))()},loadOptions:function(){var e=this;return(0,i.default)(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,r.default.getSchools({code:e.form.code});case 2:n=t.sent,e.options.school=n.data.map((function(e){var t=e.split(":")[1];return{code:t,label:t}}));case 4:case"end":return t.stop()}}),t)})))()},validate:function(){return this.form.name?this.form.icard?this.form.mobile?this.form.school_ids?0!==this.select.operators.length||(a.default.warning("请选择运营商（可多选）"),!1):(a.default.warning("请选择推广学校"),!1):(a.default.warning("请输入注册手机号"),!1):(a.default.warning("请输入身份证号"),!1):(a.default.warning("请输入真实姓名"),!1)},onRegister:function(){var e=this;return(0,i.default)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.validate()){t.next=2;break}return t.abrupt("return");case 2:return e.form.operators=e.select.operators.join(","),t.prev=3,a.default.loading(),t.next=7,r.default.register(e.form);case 7:t.sent,uni.reLaunch({url:"/pages/home/main",success:function(){setTimeout((function(){a.default.info("恭喜成为推广伙伴")}),100)}});case 9:return t.prev=9,a.default.closeLoading(),t.finish(9);case 12:case"end":return t.stop()}}),t,null,[[3,,9,12]])})))()},onSelectOperators:function(e){this.form.operators=e},onSelectSchool:function(e){this.form.school_ids=e},getPhoneNumber:function(e){var t=this;return(0,i.default)(regeneratorRuntime.mark((function n(){var o;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return a.default.loading(),n.prev=1,n.next=4,r.default.getMobile({encrypted_data:e.detail.encryptedData,iv:e.detail.iv,session_key:t.session_key});case 4:o=n.sent,t.form.mobile=o.data;case 6:return n.prev=6,a.default.closeLoading(),n.finish(6);case 9:case"end":return n.stop()}}),n,null,[[1,,6,9]])})))()}}};t.default=s},"82e8":function(e,t,n){var o=n("3100");"string"===typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);var i=n("4f06").default;i("f09c8a28",o,!0,{sourceMap:!1,shadowMode:!1})},8717:function(e,t,n){"use strict";n.r(t);var o=n("8d21"),i=n("f2ee");for(var r in i)["default"].indexOf(r)<0&&function(e){n.d(t,e,(function(){return i[e]}))}(r);n("508e");var a,s=n("f0c5"),c=Object(s["a"])(i["default"],o["b"],o["c"],!1,null,"7c2e5fe4",null,!1,o["a"],a);t["default"]=c.exports},"8d21":function(e,t,n){"use strict";var o;n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return r})),n.d(t,"a",(function(){return o}));var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-uni-view",[n("cu-custom",[n("template",{attrs:{slot:"content"},slot:"content"},[e._v("业务推广伙伴")])],2),n("v-uni-view",{staticClass:"container"},[n("v-uni-view",{staticClass:"login-title"},[e._v("成为业务推广伙伴")]),n("v-uni-view",{staticClass:"login-card"},[n("v-uni-view",[n("v-uni-input",{staticClass:"m-input login-item",attrs:{"placeholder-style":"color: #B3B3B3;",placeholder:"请输入真实姓名"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),n("v-uni-view",[n("v-uni-input",{staticClass:"m-input login-item",attrs:{type:"idcard","placeholder-style":"color: #B3B3B3;",placeholder:"请输入身份证号"},model:{value:e.form.icard,callback:function(t){e.$set(e.form,"icard",t)},expression:"form.icard"}})],1),n("v-uni-view",[n("v-uni-input",{staticClass:"m-input login-item",attrs:{"placeholder-style":"color: #B3B3B3;",type:"number",placeholder:"请输入注册手机号"},model:{value:e.form.mobile,callback:function(t){e.$set(e.form,"mobile",t)},expression:"form.mobile"}})],1),n("v-uni-view",{staticClass:"login-item flex",class:{placeholder:!e.form.school_ids},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.picker.school=!0}}},[e.form.school_ids?n("v-uni-view",{staticClass:"flex-sub"},[e._v(e._s(e.schoolStr))]):n("v-uni-view",{staticClass:"flex-sub"},[e._v("请选择推广学校")]),n("v-uni-text",{staticClass:"icon-right placeholder"})],1),n("v-uni-view",{staticClass:"login-item flex align-center",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.picker.operators=!0}}},[0===e.select.operators.length?n("v-uni-view",{staticClass:"flex-sub placeholder"},[e._v("请选择运营商（可多选）")]):n("v-uni-view",{staticClass:"flex-sub flex"},e._l(e.operatorsNames,(function(t,o){return n("v-uni-view",{key:o,staticClass:"mark"},[e._v(e._s(t))])})),1),n("v-uni-text",{staticClass:"icon-right placeholder"})],1),n("v-uni-view",{staticClass:"btn-box"},[n("v-uni-button",{staticClass:"m-btn lg bg-orange round full-width",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.onRegister.apply(void 0,arguments)}}},[e._v("注册")])],1)],1)],1),n("m-multi-picker",{attrs:{visible:e.picker.operators,options:e.options.operators},on:{"update:visible":function(t){arguments[0]=t=e.$handleEvent(t),e.$set(e.picker,"operators",t)}},model:{value:e.select.operators,callback:function(t){e.$set(e.select,"operators",t)},expression:"select.operators"}}),n("m-picker",{attrs:{visible:e.picker.school,options:e.options.school},on:{"update:visible":function(t){arguments[0]=t=e.$handleEvent(t),e.$set(e.picker,"school",t)},select:function(t){arguments[0]=t=e.$handleEvent(t),e.onSelectSchool.apply(void 0,arguments)}}})],1)},r=[]},f2ee:function(e,t,n){"use strict";n.r(t);var o=n("5764"),i=n.n(o);for(var r in o)["default"].indexOf(r)<0&&function(e){n.d(t,e,(function(){return o[e]}))}(r);t["default"]=i.a}}]);